---
import Layout from "@layouts/Layout.astro";
import { NextMoviesList } from "@components/MoviesList";
import { getNextUserMovies } from "lib/turso";

const { next } = Astro.params;

const nextAnonymousMovies = (await getNextUserMovies())
  .slice(0, Number(next))
  .map((movie) => ({ ...movie, status: "UNKNOWN", visible: true })); // default movies without user (anonymous)
---

<Layout title="Top Next" backButton={true}>
  <div class="container mx-auto px-4 py-4">
    <h2 class="tracking-wider text-red-600 text-xl font-semibold py-4">
      TOP <span class="text-white">NEXT {next}</span>
    </h2>
    <NextMoviesList
      client:visible
      initialNextMovies={nextAnonymousMovies}
      next={Number(next)}
    />
  </div>
</Layout>
