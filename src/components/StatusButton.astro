---
import type { StringMappingType } from "typescript";

interface Props {
  showStatus: string[];
  actionStatus?: string;
  iconStatus?: string;
  opacity?: boolean;
  color: string;
  size?: string;
}

const { showStatus, actionStatus, iconStatus, opacity, color, size } =
  Astro.props;
---

<button
  id={`watched-button`}
  class={`bg-slate-600 hover:bg-slate-700 border-2 border-${color}-300 ${opacity ? "opacity-90 hover:opacity-100" : ""} text-white font-bold ${size === "small" ? "py-2 px-2" : "py-4 px-4"} rounded-full mx-2 pointer-events-auto`}
  @click.stop={actionStatus
    ? `handleStatusChange(movie_id, '${actionStatus}')`
    : 'console.log("no action")'}
  x-show={`${JSON.stringify(showStatus)}.includes(status)`}
  type="button"
>
  {
    iconStatus === "WATCHED" && (
      <svg
        viewBox="0 0 24 24"
        class={`stroke-${color}-600 ${size === "small" ? "w-8 h-8 md:w-6 md:h-6 lg:w-4 lg:h-4" : "w-16 h-16 md:w-8 md:h-8 lg:w-6 lg:h-6"}`}
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <>
          <g id="SVGRepo_bgCarrier" stroke-width="0" />
          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <g id="SVGRepo_iconCarrier">
            <g id="Interface / Check_Big">
              <path
                id="Vector"
                d="M4 12L8.94975 16.9497L19.5572 6.34326"
                stroke="current"
                stroke-width="4"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </g>
          </g>
        </>
      </svg>
    )
  }
  {
    iconStatus === "DISCARD" && (
      <svg
        class={`stroke-${color}-800 fill-${color}-600 ${size === "small" ? "w-8 h-8 md:w-6 md:h-6 lg:w-4 lg:h-4" : "w-16 h-16 md:w-8 md:h-8 lg:w-6 lg:h-6"}`}
        viewBox="0 0 32 32"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
      >
        <>
          <g id="SVGRepo_bgCarrier" stroke-width="0" />
          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <g id="SVGRepo_iconCarrier">
            <title>cancel2</title>
            <path d="M19.587 16.001l6.096 6.096c0.396 0.396 0.396 1.039 0 1.435l-2.151 2.151c-0.396 0.396-1.038 0.396-1.435 0l-6.097-6.096-6.097 6.096c-0.396 0.396-1.038 0.396-1.434 0l-2.152-2.151c-0.396-0.396-0.396-1.038 0-1.435l6.097-6.096-6.097-6.097c-0.396-0.396-0.396-1.039 0-1.435l2.153-2.151c0.396-0.396 1.038-0.396 1.434 0l6.096 6.097 6.097-6.097c0.396-0.396 1.038-0.396 1.435 0l2.151 2.152c0.396 0.396 0.396 1.038 0 1.435l-6.096 6.096z" />
          </g>
        </>
      </svg>
    )
  }
</button>
